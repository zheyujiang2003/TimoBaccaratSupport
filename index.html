<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Timoç™¾å®¶è¼”åŠ©</title>
    <style>
        /* çœç•¥æ¨£å¼å®šç¾© */
    </style>
</head>
<body>

<h1>Timoç™¾å®¶è¼”åŠ©</h1>
<div class="subtext">ğŸ”¥é¸æˆ¿é¸30å±€å…§ä»¥æé«˜é æ¸¬æº–ç¢ºç‡ğŸ”¥</div>

<div class="container">
    <div class="panel">
        <h2>è¼¸å…¥å€</h2>
        <div class="input-group">
            <label for="player">é–’ç‰Œå€¼ï¼ˆä¾åºè¼¸å…¥ä¸‰å¼µç‰Œé»æ•¸ï¼‰ï¼š</label>
            <input type="text" id="player" maxlength="3" placeholder="ä¾‹å¦‚ï¼š789 æˆ– 780">
        </div>
        <div class="input-group">
            <label for="banker">èŠç‰Œå€¼ï¼ˆä¾åºè¼¸å…¥ä¸‰å¼µç‰Œé»æ•¸ï¼‰ï¼š</label>
            <input type="text" id="banker" maxlength="3" placeholder="ä¾‹å¦‚ï¼š345 æˆ– 340">
        </div>
        <button class="calculate-btn" onclick="calculateResult()">è¨ˆç®—çµæœ</button>
        <button class="clear-btn" onclick="clearAll()">æ¶ˆé™¤å…¨éƒ¨</button>

        <div class="social-links desktop">
            <!-- ç¤¾äº¤é€£çµ -->
        </div>
        <div class="team-info">ğŸª½è™ç¿¼åœ˜éšŠ-è³­ç‹—æƒ…ä¾¶ğŸª½</div>
    </div>

    <div class="panel">
        <h2>å…¬å¼é¸æ“‡</h2>
        <select id="formulaSelect" onchange="checkFormula()">
            <option value="AP">AP æ¬Šé‡æ¨¡å¼</option>
            <option value="ThreePoint">ä¸‰é»å‰å…¬å¼</option>
            <option value="Size">å¤§å°ç‰Œå…¬å¼</option>
            <option value="Stability">å®‰å®šå€¼å…¬å¼</option>
        </select>

        <div class="prediction-result">
            <h2>AIèªª</h2>
            <div id="predictionResult">ç­‰å¾…è¼¸å…¥...</div>
        </div>
        <div class="accuracy" id="accuracyDisplay">
            <div>ç›®å‰é æ¸¬æº–ç¢ºç‡ï¼š<span id="accuracyRate">100%</span></div>
        </div>

        <div class="grid-container" id="historyDisplay">
            <!-- 6x6 çš„æ£‹ç›¤æ ¼å­æ¨£å¼ -->
            <script>
                for (let i = 0; i < 36; i++) {
                    document.write('<div class="grid-item"></div>');
                }
            </script>
        </div>
    </div>

    <div class="social-links mobile">
        <!-- æ‰‹æ©Ÿç¤¾äº¤é€£çµ -->
    </div>
</div>

<script>
    let totalPredictions = 0;
    let correctPredictions = 0;
    const history = [];
    let currentFormula = 'AP';
    const stabilityValues = [
        /* æŒ‰ç…§åœ–ç‰‡ä¸­çš„å®‰å®šå€¼è¡¨å¡«å…¥å°æ‡‰å€¼ï¼Œä¾‹å¦‚ [-3, 0, -2, ...] */
        [-3, 3, 3, 4, 5, 5, 5, 7, 10, 10],
        [0, -3, 3, 3, 4, 4, 6, 7, 10, 10],
        [-2, -2, -3, 0, 4, 4, 5, 6, 10, 10],
        [-2, -2, -2, -2, 0, 4, 4, 5, 10, 10],
        [-4, -4, -4, -4, -4, 0, 4, 5, 10, 10],
        [-5, -5, -5, -5, -5, -4, 0, 5, 10, 10],
        [-6, -6, -5, -5, -5, -5, -5, 0, 10, 10],
        [-10, -10, -10, -10, -10, -5, -4, -5, 0, 10],
        [-10, -10, -10, -10, -10, -10, -10, -10, 0, 10],
        [-10, -10, -10, -10, -10, -10, -10, -10, -10, 0]
    ];

    function checkFormula() {
        currentFormula = document.getElementById("formulaSelect").value;
        if (currentFormula === "Size") {
            alert("æœ¬æ¨¡å¼è¼ƒä¸é©åˆæ–°æ‰‹ï¼Œå°‡ä¸å±•ç¤ºé æ¸¬æº–ç¢ºç‡");
            document.getElementById("accuracyDisplay").style.display = "none";
        } else if (currentFormula === "Stability") {
            alert("å®‰å®šå€¼å…¬å¼ï¼šè¼¸å…¥äº”å±€å¾Œé–‹å§‹é æ¸¬");
            document.getElementById("accuracyDisplay").style.display = "none";
        } else {
            document.getElementById("accuracyDisplay").style.display = "block";
        }
        updateAccuracy();
        updateHistoryDisplay();
    }

    function calculateResult() {
        const playerInput = document.getElementById('player').value.padEnd(3, '0');
        const bankerInput = document.getElementById('banker').value.padEnd(3, '0');

        if (!/^[0-9]+$/.test(playerInput) || !/^[0-9]+$/.test(bankerInput) || playerInput.length !== 3 || bankerInput.length !== 3) {
            alert("è«‹ç¢ºä¿è¼¸å…¥çš„ç‰Œé»æ•¸ç‚ºä¸‰ä½æ•¸å­—ï¼Œç„¡è£œç‰Œæ™‚è«‹è¼¸å…¥0ã€‚");
            return;
        }

        const playerPoints = (parseInt(playerInput[0]) + parseInt(playerInput[1]) + parseInt(playerInput[2])) % 10;
        const bankerPoints = (parseInt(bankerInput[0]) + parseInt(bankerInput[1]) + parseInt(bankerInput[2])) % 10;
        let actualOutcome = playerPoints > bankerPoints ? "é–’" : bankerPoints > playerPoints ? "èŠ" : "å’Œ";
        let predictedOutcome, recommendation;

        if (currentFormula === "AP") {
            // APæ¨¡å¼è¨ˆç®—
        } else if (currentFormula === "ThreePoint") {
            // ä¸‰é»å‰å…¬å¼è¨ˆç®—
        } else if (currentFormula === "Size") {
            // å¤§å°ç‰Œå…¬å¼è¨ˆç®—
        } else if (currentFormula === "Stability") {
            // å®‰å®šå€¼å…¬å¼è¨ˆç®—
            if (history.length >= 5) {
                const stabilityValue = stabilityValues[playerPoints][bankerPoints];
                if (stabilityValue < 0) {
                    recommendation = "æ¨è–¦é–’";
                } else if (stabilityValue > 0) {
                    recommendation = "æ¨è–¦èŠ";
                } else {
                    recommendation = "ç„¡å»ºè­°";
                }
            } else {
                recommendation = "ç­‰å¾…è¶³å¤ å±€æ•¸...";
            }
        }

        document.getElementById("predictionResult").innerText = recommendation;
        history.push({ actual: actualOutcome, predicted: predictedOutcome });
        updateAccuracy();
        updateHistoryDisplay();
        clearInputs();
    }

    function updateAccuracy() {
        const accuracyRate = totalPredictions <= 1 ? 100 : ((correctPredictions / totalPredictions) * 100).toFixed(2);
        document.getElementById("accuracyRate").innerText = `${accuracyRate}%`;
    }

    function updateHistoryDisplay() {
        const historyDisplay = document.getElementById("historyDisplay");
        const items = historyDisplay.querySelectorAll(".grid-item");

        items.forEach(item => {
            item.classList.remove('zhuang', 'xian', 'heju');
            item.innerText = '';
        });

        history.forEach((entry, index) => {
            const row = index % 6;
            const col = Math.floor(index / 6);
            const targetIndex = row * 6 + col;
            const targetItem = items[targetIndex];
            
            if (entry.actual === "èŠ") {
                targetItem.classList.add("zhuang");
                targetItem.innerText = "èŠ";
            } else if (entry.actual === "é–’") {
                targetItem.classList.add("xian");
                targetItem.innerText = "é–’";
            } else {
                targetItem.classList.add("heju");
                targetItem.innerText = "å’Œ";
            }
        });
    }

    function clearInputs() {
        document.getElementById("player").value = "";
        document.getElementById("banker").value = "";
    }

    function clearAll() {
        document.getElementById("player").value = "";
        document.getElementById("banker").value = "";
        document.getElementById("predictionResult").innerText = "ç­‰å¾…è¼¸å…¥...";
        document.getElementById("accuracyRate").innerText = "100%";

        totalPredictions = 0;
        correctPredictions = 0;
        history.length = 0;

        updateHistoryDisplay();
    }
</script>

</body>
</html>